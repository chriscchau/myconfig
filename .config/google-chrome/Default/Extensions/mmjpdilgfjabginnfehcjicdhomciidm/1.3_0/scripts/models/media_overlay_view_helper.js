Readium.Models.MediaOverlayViewHelper=Backbone.Model.extend({initialize:function(){this.epubController=this.get("epubController")},addActiveClass:function(a){var c=this.getActiveClass();a.toggleClass(c,!0)},removeActiveClass:function(a){if(a!=null&&a!=void 0){var c=this.getActiveClass(),a=$(a).find("."+c);a.toggleClass(c,!1);return a}return null},renderFixedLayoutMoFragHighlight:function(a,c,b){var d=this;$.each(a,function(){var a=b.getPageBody(this);d.removeActiveClass(a)});c&&$.each(a,function(){var a=
b.getPageBody(this);(a=$(a).find("#"+c))&&d.addActiveClass(a)})},renderFixedMoPlaying:function(a,c,b){var d=this;this.authorActiveClassExists()&&(c||$.each(a,function(){var a=b.getPageBody(this);d.removeActiveClass(a)}))},renderReflowableMoFragHighlight:function(a,c,b){a==="default"&&(a="default-theme");var d=c.getBody(),e=this.removeActiveClass(d);this.authorActiveClassExists()==!1&&e&&$(e).css("color","");if(b&&(b=$(d).find("#"+b)))this.addActiveClass(b),this.authorActiveClassExists()==!1&&$(b).css("color",
c.themes[a].color)},renderReflowableMoPlaying:function(a,c,b){if(this.authorActiveClassExists()){if(!c)var d=b.getBody(),a=this.removeActiveClass(d)}else a==="default"&&(a="default-theme"),d=b.getBody(),c?$(d).css("color",b.themes[a]["mo-color"]):($(d).css("color",b.themes[a].color),(a=this.removeActiveClass(b.getBody()))&&$(a).css("color",""))},getActiveClass:function(){var a=this.epubController.packageDocument.get("metadata").active_class;a==""&&(a="-readium-epub-media-overlay-active");return a},
authorActiveClassExists:function(){return this.epubController.packageDocument.get("metadata").active_class==""?!1:!0}});
